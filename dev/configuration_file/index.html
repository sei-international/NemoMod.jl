<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration files · NEMO</title><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9GTNP1Q3KY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-9GTNP1Q3KY');
</script><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="NEMO logo"/></a><div class="docs-package-name"><span class="docs-autofit">NEMO</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../quick_start/">Quick start</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../model_concept/">Model concept</a></li><li><span class="tocitem">Inputs</span><ul><li><a class="tocitem" href="../dimensions/">Dimensions</a></li><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../time_slicing/">Time slicing</a></li><li><a class="tocitem" href="../units/">Units of measure</a></li></ul></li><li><span class="tocitem">Outputs</span><ul><li><a class="tocitem" href="../variables/">Variables</a></li></ul></li><li><a class="tocitem" href="../scenario_db/">Scenario databases</a></li><li><span class="tocitem">Calculating a scenario</span><ul><li><a class="tocitem" href="../calculatescenario/">Julia syntax</a></li><li><a class="tocitem" href="../selected_years/">Calculating selected years</a></li><li class="is-active"><a class="tocitem" href>Configuration files</a><ul class="internal"><li><a class="tocitem" href="#Including-a-configuration-file-in-a-LEAP-NEMO-model"><span>Including a configuration file in a LEAP-NEMO model</span></a></li></ul></li><li><a class="tocitem" href="../performance_tips/">Performance tips</a></li></ul></li><li><a class="tocitem" href="../custom_constraints/">Custom constraints</a></li><li><a class="tocitem" href="../faqs/">FAQs</a></li><li><a class="tocitem" href="../functions/">Function reference</a></li><li><a class="tocitem" href="../release_notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Calculating a scenario</a></li><li class="is-active"><a href>Configuration files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration files</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sei-international/NemoMod.jl/blob/master/docs/src/configuration_file.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="configuration_file"><a class="docs-heading-anchor" href="#configuration_file">Configuration files</a><a id="configuration_file-1"></a><a class="docs-heading-anchor-permalink" href="#configuration_file" title="Permalink"></a></h1><p>When you calculate a scenario with NEMO, you can provide a configuration file that sets run-time options. The file should be named <code>nemo.ini</code> or <code>nemo.cfg</code> and should be available in Julia&#39;s working directory. To check the working directory in a Julia session, use the <code>pwd</code> function. To change the working directory, use <code>cd</code>.</p><p>NEMO configuration files are text files written in <code>ini</code> syntax. The following run-time options can be specified in a configuration file.</p><ul><li><strong><code>calculatescenarioargs</code></strong> block <em>(options for <a href="../calculatescenario/#NemoMod.calculatescenario"><code>calculatescenario</code></a>)</em><ul><li><strong><code>jumpdirectmode</code></strong> - Indicates whether JuMP&#39;s direct mode should be used in the calculation (<code>true</code> or <code>false</code>). Direct mode bypasses some JuMP features that help to ensure compatibility with a wide range of solvers. These include reformulating (or bridging) the constraints, variables, and optimization objective that NEMO defines as needed to promote cross-solver compatibility. When direct mode is invoked, scenario calculation is generally faster and requires less memory; however, it can result in a solver error in some cases. If this option is set in a configuration file, it overrides the selection of direct mode in the JuMP <code>Model</code> object passed to <code>calculatescenario</code> (via the <code>jumpmodel</code> argument). If <code>jumpmodel</code> does not align with <code>jumpdirectmode</code>, NEMO resets <code>jumpmodel</code> to activate/deactivate direct mode accordingly. This process restores model attributes (except for the choice of solver) and solver parameters to their default values. To ensure solver parameters are retained, specify them in the <code>solver</code> block of the configuration file. For more information on direct mode, see the <a href="https://jump.dev/JuMP.jl/stable/">JuMP documentation</a>.</li><li><strong><code>jumpbridges</code></strong> - Indicates whether JuMP&#39;s bridging features should be used in the calculation (ignored if <code>jumpdirectmode</code> is <code>true</code>, as this implies bridging is disabled). Bridging involves reformulating the constraints, variables, and optimization objective that NEMO defines as needed to promote cross-solver compatibility. When bridging is disabled, scenario calculation is generally faster and requires less memory; however, it can result in a solver error in some cases. If this option is set in a configuration file, it overrides the use of bridging in the JuMP <code>Model</code> object passed to <code>calculatescenario</code> (via the <code>jumpmodel</code> argument). If <code>jumpmodel</code> does not align with <code>jumpbridges</code>, NEMO resets <code>jumpmodel</code> to activate/deactivate bridging accordingly. This process has the same effects as described under <code>jumpdirectmode</code>. For more information on bridging, see the JuMP documentation.</li><li><strong><code>calcyears</code></strong> - Comma-delimited list of <a href="../dimensions/#year"><code>years</code></a> to include in the scenario calculation (should be a subset of the years defined in the <a href="../scenario_db/#scenario_db">scenario database</a>). If this option is set in a configuration file, it overrides the <code>calcyears</code> argument for <code>calculatescenario</code>.</li><li><strong><code>varstosave</code></strong> - Comma-delimited list of output <a href="../variables/#variables">variables</a> (Julia variable names) whose values should be saved in the scenario database at the end of the calculation. NEMO adds variables specified in a configuration file to those requested in the <code>varstosave</code> argument for <code>calculatescenario</code>.</li><li><strong><code>restrictvars</code></strong> - Indicates whether NEMO should conduct additional data analysis to limit the set of variables created in the optimization problem for the scenario (<code>true</code> or <code>false</code>). By default, to improve performance, NEMO selectively creates certain variables to avoid combinations of subscripts that do not exist in the scenario&#39;s data. This option increases the stringency of this filtering. It requires more processing time as the model is built, but it can substantially reduce the solve time for large models. If this option is specified in a configuration file, it overrides the <code>restrictvars</code> argument for <code>calculatescenario</code>.</li><li><strong><code>reportzeros</code></strong> - Indicates whether results saved in the scenario database should include values equal to zero (<code>true</code> or <code>false</code>). Forgoing zeros can substantially improve the performance of large models. If this option is specified in a configuration file, it overrides the <code>reportzeros</code> argument for <code>calculatescenario</code>.</li><li><strong><code>continuoustransmission</code></strong> - Indicates whether continuous (<code>true</code>) or binary (<code>false</code>) variables are used to represent investment decisions for candidate <a href="../dimensions/#transmissionline">transmission lines</a>. Continuous decision variables can decrease model run-time but may reduce the realism of transmission simulations. This option is not relevant in scenarios that do not model transmission. If it is specified in a configuration file, it overrides the <code>continuoustransmission</code> argument for <code>calculatescenario</code>.</li><li><strong><code>forcemip</code></strong> - Indicates whether NEMO is forced to formulate a mixed-integer optimization problem for the scenario (<code>true</code> or <code>false</code>). Activating this option can improve performance with some solvers (e.g., CPLEX, Mosek). If this option is specified in a configuration file, it overrides the <code>forcemip</code> argument for <code>calculatescenario</code>. If you do not activate <code>forcemip</code> (in a configuration file or as an argument for <code>calculatescenario</code>), the input parameters in your scenario database determine whether the optimization problem for the scenario is mixed-integer. See the note under <a href="../installation/#solver_compatibility">Solver compatibility</a> for more information.</li><li><strong><code>startvalsdbpath</code></strong> - Path to a previously calculated scenario database from which NEMO should take starting values for optimization variables. Paths containing spaces should be enclosed in double quotes (<code>&quot;</code>). This option is used in conjunction with <code>startvalsvars</code> to warm start optimization. If it is specified in a configuration file, it overrides the <code>startvalsdbpath</code> argument for <code>calculatescenario</code>.</li><li><strong><code>startvalsvars</code></strong> - Comma-delimited list of variables (Julia variable names) for which starting values should be set. NEMO takes starting values from output variable results saved in the database identified by <code>startvalsdbpath</code>. Saved results are matched to variables in the optimization problem using the variables&#39; subscripts, and starting values are set with JuMP&#39;s <code>set_start_value</code> function. If you don&#39;t provide a value for <code>startvalsvars</code>, NEMO sets starting values for all variables present in both the optimization problem and the <code>startvalsdbpath</code> database. If <code>startvalsvars</code> is specified in a configuration file, it overrides the <code>startvalsvars</code> argument for <code>calculatescenario</code>.</li><li><strong><code>precalcresultspath</code></strong> - Path to a previously calculated scenario database that NEMO should copy over the database specified by the <code>calculatescenario</code> <code>dbpath</code> argument. Paths containing spaces should be enclosed in double quotes (<code>&quot;</code>). This option can also be a directory containing previously calculated scenario databases, in which case NEMO copies any file in the directory with the same name as the <code>dbpath</code> database. If this option is activated, the copying replaces normal scenario optimization. If you set <code>precalcresultspath</code> in a configuration file, it overrides the <code>precalcresultspath</code> argument for <code>calculatescenario</code>.</li><li><strong><code>quiet</code></strong> - Indicates whether NEMO should suppress low-priority status messages (which are otherwise printed to <code>STDOUT</code>). If this option is specified in a configuration file, it overrides the <code>quiet</code> argument for <code>calculatescenario</code>.</li></ul></li><li><strong><code>solver</code></strong> block <em>(solver options)</em><ul><li><strong><code>parameters</code></strong> - Comma-delimited list of solver run-time parameters. Format: parameter1=value1, parameter2=value2, ...</li></ul></li><li><strong><code>includes</code></strong> block <em>(custom Julia scripts)</em><ul><li><strong><code>beforescenariocalc</code></strong> - Path to a Julia script that should be run before NEMO calculates the scenario. The path should be defined relative to the Julia working directory (e.g., <code>./my_script.jl</code>). Paths containing spaces should be enclosed in double quotes (<code>&quot;</code>).</li><li><strong><code>afterscenariocalc</code></strong> - Path to a Julia script that should be run after NEMO calculates the scenario. The path should be defined relative to the Julia working directory (e.g., <code>./my_script.jl</code>). Paths containing spaces should be enclosed in double quotes (<code>&quot;</code>).  </li><li><strong><code>customconstraints</code></strong> - Path to a Julia script that should be run when NEMO builds constraints for the scenario. The script can be used to add <a href="../custom_constraints/#custom_constraints">custom constraints</a> to the model. The path should be defined relative to the Julia working directory. Paths containing spaces should be enclosed in double quotes (<code>&quot;</code>).</li></ul></li></ul><p>NEMO comes with a sample configuration file saved at <code>utils/nemo.ini</code> in the NEMO package directory. You can find the NEMO package directory in Julia as follows:</p><pre><code class="language-julia">julia&gt; using NemoMod

julia&gt; println(normpath(joinpath(pathof(NemoMod), &quot;..&quot;, &quot;..&quot;)))</code></pre><p>Here&#39;s an example of a configuration file that sets a few of the available options.</p><pre><code class="language-none">[calculatescenarioargs]
varstosave=vnewcapacity,vtotalcapacityannual
continuoustransmission=true

[solver]
parameters=CPX_PARAM_DEPIND=-1,CPXPARAM_LPMethod=1  ; Parameters for CPLEX solver

[includes]
beforescenariocalc=./before_scenario_script.jl
customconstraints=&quot;c:/my path/custom_constraints.jl&quot;</code></pre><h2 id="Including-a-configuration-file-in-a-LEAP-NEMO-model"><a class="docs-heading-anchor" href="#Including-a-configuration-file-in-a-LEAP-NEMO-model">Including a configuration file in a LEAP-NEMO model</a><a id="Including-a-configuration-file-in-a-LEAP-NEMO-model-1"></a><a class="docs-heading-anchor-permalink" href="#Including-a-configuration-file-in-a-LEAP-NEMO-model" title="Permalink"></a></h2><p>If you&#39;re running NEMO through LEAP, you can include a NEMO configuration file in your LEAP model to have it used at calculation time. Options set in the file will override or add to the NEMO options LEAP would otherwise choose (see above for details on which options override defaults and which add to them).</p><p>Here are the steps to follow:</p><ol><li>Create the configuration file and name it <code>nemo.cfg</code>.</li><li>Close your model in LEAP.</li><li>Locate the LEAP areas repository on your computer. The areas repository is a folder where LEAP saves all models installed on a computer; typically, it is in your Windows user&#39;s Documents folder and is named &quot;LEAP Areas&quot;. As of LEAP version 2020.1.0.37, you can find the path to the LEAP areas repository within LEAP by looking at Settings -&gt; Folders -&gt; Areas. <img src="../assets/leap_folders.png" alt="LEAP folder settings"/></li><li>Copy the configuration file to your model&#39;s folder in the LEAP areas repository. This folder will have the same name as your model.</li><li>Open the model in LEAP and calculate a scenario that optimizes with NEMO. If the configuration file is successfully used in the calculation, you should see output in the NEMO window that indicates the file was read (unless you set the <code>quiet</code> option in the configuration file to <code>true</code> - this suppresses the output).</li></ol><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>When modifying an existing NEMO configuration file in a LEAP-NEMO model, be sure to close the model in LEAP first. Otherwise your changes may not be applied correctly.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../selected_years/">« Calculating selected years</a><a class="docs-footer-nextpage" href="../performance_tips/">Performance tips »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 29 May 2024 18:15">Wednesday 29 May 2024</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
